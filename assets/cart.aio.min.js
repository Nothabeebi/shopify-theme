/*
Generated time: July 23, 2025 12:02
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
class CartRemoveButton extends HTMLElement{constructor(){super(),this.addEventListener("click",t=>{if(t.preventDefault(),null==this.getAttribute("data-custom-bundle-prod")){t=this.closest("cart-items")||this.closest("cart-drawer-items");try{removeCompleteItemFromCartEvent(this.dataset.index)}catch(t){console.error("Some error in pushing the event to GTM:",t)}t.updateQuantity(this.dataset.index,0,"",this.getAttribute("data-quantity-variant-id"))}});var t=$("body").attr("class").split(" ").find(function(t){return t.startsWith("location-")});$(".product_card_wrapper").each(function(){$(this).attr("class").includes(t)&&$(this).removeClass("content_hidden")})}}customElements.define("cart-remove-button",CartRemoveButton);class CartItems extends HTMLElement{constructor(){super(),this.lineItemStatusElement=document.getElementById("shopping-cart-line-item-status")||document.getElementById("CartDrawer-LineItemStatus");var t=debounce(t=>{t.target&&t.target.classList.contains("byoh_quantity__input")||this.onChange(t)},ON_CHANGE_DEBOUNCE_TIMER);this.addEventListener("change",t)}cartUpdateUnsubscriber=void 0;connectedCallback(){this.cartUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,t=>{"cart-items"!==t.source&&this.onCartUpdate()})}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber()}onChange(t){this.classList.contains("byoh_quantity")||this.updateQuantity(t.target.dataset.index,t.target.value,document.activeElement.getAttribute("name"),t.target.getAttribute("data-quantity-variant-id"))}onCartUpdate(){fetch("/cart?section_id=main-cart-items").then(t=>t.text()).then(t=>{t=(new DOMParser).parseFromString(t,"text/html").querySelector("cart-items");this.innerHTML=t.innerHTML}).catch(t=>{console.error(t)})}getSectionsToRender(){return[{id:"main-cart-items",section:document.getElementById("main-cart-items").dataset.id,selector:".js-contents"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"},{id:"cart-live-region-text",section:"cart-live-region-text",selector:".shopify-section"},{id:"main-cart-footer",section:document.getElementById("main-cart-footer").dataset.id,selector:".js-contents"}]}updateQuantity(i,s,c,t=""){var l=c,e=document.getElementById("line_product_quantity_"+i).value,e=(null==l&&document.getElementById("line_product_quantity_"+i)&&(parseInt(e)>parseInt(s)?l="minus":parseInt(e)<parseInt(s)&&(l="plus")),$(".product_warehouse_"+i).val(),$(".product_warehouse_available_quantity_"+$(".product_warehouse_"+i).val()+"_"+t+"_"+i).val());let r=$("#product_url_"+i).val();parseInt(s);if(parseInt(e)<parseInt(s))return showPopup("The requested quantity is not available. Would you like to reset the TAT? This will remove the product from the cart and redirect you to the product page.",()=>{var t=document.getElementById("line_product_variant_id_"+i).value,t=JSON.stringify({id:t,quantity:0});fetch(""+routes.cart_change_url,{...fetchConfig(),body:t}).then(t=>{t.ok?(console.log("Product removed from the cart."),window.location.href=r):console.error("Error removing product from the cart.")}).catch(t=>{console.error("Error in fetch request:",t)})},()=>{window.location.reload(),console.log("User canceled the action.")}),!1;this.enableLoading(i);e=""!=t?t:i;if(null==e)return!1;t=JSON.stringify({id:e,quantity:s,sections:this.getSectionsToRender().map(t=>t.section),sections_url:window.location.pathname});fetch(""+routes.cart_change_url,{...fetchConfig(),body:t}).then(t=>t.text()).then(e=>{if($("cart-drawer-items").find("[data-cart-prod-bundle-id]").length)return location.reload(),!0;let r=JSON.parse(e);var e=document.getElementById("Quantity-"+i)||document.getElementById("Drawer-quantity-"+i),n=document.querySelectorAll(".cart-item");if(r.errors)e.value=e.getAttribute("value"),this.updateLiveRegions(i,r.errors);else{this.classList.toggle("is-empty",0===r.item_count);var a=document.querySelector("cart-drawer"),o=document.getElementById("main-cart-footer"),o=(o&&o.classList.toggle("is-empty",0===r.item_count),a&&a.classList.toggle("is-empty",0===r.item_count),this.getSectionsToRender().forEach(t=>{(document.getElementById(t.id).querySelector(t.selector)||document.getElementById(t.id)).innerHTML=this.getSectionInnerHTML(r.sections[t.section],t.selector)}),r.items[i-1]?r.items[i-1].quantity:void 0);let t="";n.length===r.items.length&&o!==parseInt(e.value)&&(t=void 0===o?window.cartStrings.error:window.cartStrings.quantityError.replace("[quantity]",o)),this.updateLiveRegions(i,t);n=document.getElementById("CartItem-"+i)||document.getElementById("CartDrawer-Item-"+i);if(n&&n.querySelector(`[name="${c}"]`)?a?trapFocus(a,n.querySelector(`[name="${c}"]`)):n.querySelector(`[name="${c}"]`).focus():0===r.item_count&&a?trapFocus(a.querySelector(".drawer__inner-empty"),a.querySelector("a")):document.querySelector(".cart-item")&&a&&trapFocus(a,document.querySelector(".cart-item__name")),publish(PUB_SUB_EVENTS.cartUpdate,{source:"cart-items"}),0!=s)try{"plus"==l?addToCartEvent(i):"minus"==l&&removeItemFromCartEvent(i)}catch(t){console.error("Some error in pushing the event to GTM:",t)}}}).catch(()=>{this.querySelectorAll(".loading-overlay").forEach(t=>t.classList.add("hidden")),(document.getElementById("cart-errors")||document.getElementById("CartDrawer-CartErrors")).textContent=window.cartStrings.error}).finally(()=>{this.disableLoading(i)})}updateLiveRegions(t,e){t=document.getElementById("Line-item-error-"+t)||document.getElementById("CartDrawer-LineItemError-"+t);t&&(t.querySelector(".cart-item__error-text").innerHTML=e),this.lineItemStatusElement.setAttribute("aria-hidden",!0);let r=document.getElementById("cart-live-region-text")||document.getElementById("CartDrawer-LiveRegionText");r.setAttribute("aria-hidden",!1),setTimeout(()=>{r.setAttribute("aria-hidden",!0)},1e3)}getSectionInnerHTML(t,e){return(new DOMParser).parseFromString(t,"text/html").querySelector(e).innerHTML}enableLoading(t){(document.getElementById("main-cart-items")||document.getElementById("CartDrawer-CartItems")).classList.add("cart__items--disabled");var e=this.querySelectorAll(`#CartItem-${t} .loading-overlay`),t=this.querySelectorAll(`#CartDrawer-Item-${t} .loading-overlay`);[...e,...t].forEach(t=>t.classList.remove("hidden")),document.activeElement.blur(),this.lineItemStatusElement.setAttribute("aria-hidden",!1)}disableLoading(t){(document.getElementById("main-cart-items")||document.getElementById("CartDrawer-CartItems")).classList.remove("cart__items--disabled");var e=this.querySelectorAll(`#CartItem-${t} .loading-overlay`),t=this.querySelectorAll(`#CartDrawer-Item-${t} .loading-overlay`);e.forEach(t=>t.classList.add("hidden")),t.forEach(t=>t.classList.add("hidden"))}}function showPopup(t,e,r){let n=document.getElementById("tatResetPopup");var a=n.querySelector("p"),o=document.getElementById("popupOkButton"),i=document.getElementById("popupRejectButton");a.textContent=t,n.style.display="flex",o.onclick=null,i.onclick=null,o.onclick=function(){n.style.display="none","function"==typeof e&&e()},i.onclick=function(){n.style.display="none","function"==typeof r&&r()}}customElements.define("cart-items",CartItems),customElements.get("cart-note")||customElements.define("cart-note",class extends HTMLElement{constructor(){super(),this.addEventListener("change",debounce(t=>{t=JSON.stringify({note:t.target.value});fetch(""+routes.cart_update_url,{...fetchConfig(),body:t})},ON_CHANGE_DEBOUNCE_TIMER))}});